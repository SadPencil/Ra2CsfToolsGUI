<?xml version="1.0" encoding="utf-8"?>

<Window
    xmlns:l10n="clr-namespace:Ra2CsfToolsGUI.LocalizationResources"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:ui="http://schemas.modernwpf.com/2019" xmlns:local="clr-namespace:Ra2CsfToolsGUI" xmlns:dragablz="http://dragablz.net/winfx/xaml/dragablz" x:Class="Ra2CsfToolsGUI.MainWindow" ui:WindowHelper.UseModernWindowStyle="True" mc:Ignorable="d" Title="{Binding WindowTitle, Mode=OneWay}" Height="550" Width="850" AllowDrop="True" Drop="Window_Drop" ContentRendered="Window_Content_Rendered">
    <Window.Resources>
        <local:BooleanToVisibilityConverter  x:Key="BoolToVisConverter" />
        <local:BooleanToVisibilityConverter  x:Key="Not_BoolToVisConverter" True="Collapsed" False="Visible" />
    </Window.Resources>
    <!-- Localization reference (Chinese): https://www.cnblogs.com/wpinfo/p/wpf_localization.html https://web.archive.org/web/20250817155821/https://www.cnblogs.com/wpinfo/p/wpf_localization.html -->
    <TabControl>
        <TabItem Header="{x:Static l10n:TextResources.HomeTabHeader}" x:Name="UI_HomeTabItem">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Home" />
            </ui:TabItemHelper.Icon>

            <StackPanel>
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <!-- this column will be center aligned -->
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                        <Label Margin="5" FontWeight="Light" FontSize="36" Content="{Binding ApplicationName, Mode=OneWay}" />
                        <Label Margin="5" VerticalAlignment="Bottom" FontWeight="Light" FontSize="24" Content="{Binding Version, Mode=OneWay}" />
                    </StackPanel>
                </Grid>
                <StackPanel>
                    <TextBlock Margin="10,10,10,0" FontSize="16" TextWrapping="Wrap" Text="{x:Static l10n:TextResources.HomeTabTextBlock1}" />
                    <StackPanel Orientation="Horizontal" Margin="10,0,10,0">
                        <ui:SymbolIcon Symbol="Accept" VerticalAlignment="Center" Margin="0,0,5,0" />
                        <TextBlock FontSize="16" TextWrapping="Wrap" Text="{x:Static l10n:TextResources.HomeTabTextBlock2}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="10,0,10,0">
                        <ui:SymbolIcon Symbol="Accept" VerticalAlignment="Center" Margin="0,0,5,0" />
                        <TextBlock FontSize="16" TextWrapping="Wrap" Text="{x:Static l10n:TextResources.HomeTabTextBlock3}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="10,0,10,10" Visibility="{Binding Converter={StaticResource Not_BoolToVisConverter}, Path=AdvancedMode}">
                        <ui:SymbolIcon Symbol="Accept" VerticalAlignment="Center" Margin="0,0,5,0" />
                        <TextBlock FontSize="16" TextWrapping="Wrap" Text="{x:Static l10n:TextResources.HomeTabTextBlock4}" />
                    </StackPanel>

                    <StackPanel Orientation="Vertical" Margin="10,0,10,10" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Accept" VerticalAlignment="Center" Margin="0,0,5,0" />
                            <TextBlock FontSize="16" TextWrapping="Wrap" Text="{x:Static l10n:TextResources.HomeTabTextBlock5}" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <ui:SymbolIcon Symbol="Accept" VerticalAlignment="Center" Margin="0,0,5,0" />
                            <TextBlock FontSize="16" TextWrapping="Wrap" Text="{x:Static l10n:TextResources.HomeTabTextBlock6}" />
                        </StackPanel>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="10" VerticalAlignment="Center">
                        <ui:SymbolIcon Symbol="Forward" VerticalAlignment="Center" Margin="0,0,5,0" />
                        <TextBlock FontSize="16" TextWrapping="Wrap" Text="{x:Static l10n:TextResources.HomeTabTextBlock7}" />
                    </StackPanel>
                </StackPanel>
                <CheckBox Margin="10" FontSize="16" IsChecked="{Binding Path=AdvancedMode, Mode=TwoWay}" Content="{x:Static l10n:TextResources.HomeTabAdvancedMode}"/>
            </StackPanel>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.SettingsTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Setting" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <GroupBox Header="{x:Static l10n:TextResources.SettingsGroupboxHeader}">
                    <ui:SimpleStackPanel Spacing="12">
                        <TextBlock TextWrapping="Wrap" FontSize="16" Text="{x:Static l10n:TextResources.SettingsTextBlock1}"/>
                        <CheckBox FontSize="16" Content="{x:Static l10n:TextResources.SettingsCheckbox1}" IsChecked="{Binding Encoding1252ReadWorkaround}" />
                        <CheckBox FontSize="16" Content="{x:Static l10n:TextResources.SettingsCheckbox2}" IsChecked="{Binding Encoding1252WriteWorkaround}" />
                    </ui:SimpleStackPanel>
                </GroupBox>
            </ui:SimpleStackPanel>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.FormatConverterTabHeader}" x:Name="UI_FormatConverterTabItem">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Edit" />
            </ui:TabItemHelper.Icon>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <ui:SimpleStackPanel Grid.Row="0" Spacing="12" Margin="10">
                    <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.FormatConverterTextBlock1}" />
                    <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.FormatConverterTextBlock2}" />
                    <ui:SimpleStackPanel Spacing="12" Margin="0" Orientation="Horizontal">
                        <Button Content="{x:Static l10n:TextResources.FormatConverterButton1_Basic}" Click="Convert_LoadFile_Click" Visibility="{Binding Converter={StaticResource Not_BoolToVisConverter}, Path=AdvancedMode}" />
                        <Button Content="{x:Static l10n:TextResources.FormatConverterButton1_Advanced}" Click="Convert_LoadFile_Click" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}" />
                        <Button Content="{x:Static l10n:TextResources.FormatConverterButton2}" Click="Convert_SaveAsIni_Click" />
                        <Button Content="{x:Static l10n:TextResources.FormatConverterButton3}" Click="Convert_SaveAsCsf_Click" />
                    </ui:SimpleStackPanel>
                    <ui:SimpleStackPanel Spacing="12" Margin="0" Orientation="Horizontal" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}" >
                        <Button Content="{x:Static l10n:TextResources.FormatConverterButton4}" Click="Convert_SaveAsYaml_Click" />
                        <Button Content="{x:Static l10n:TextResources.FormatConverterButton5}" Click="Convert_SaveAsJson_Click" />
                    </ui:SimpleStackPanel>
                    <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.FormatConverterTextBlock3}" />

                </ui:SimpleStackPanel>

                <TextBox Margin="10,0,10,0" Grid.Row="1" AcceptsReturn="True" TextWrapping="Wrap" VerticalAlignment="Stretch" IsReadOnly="True" VerticalScrollBarVisibility="Visible" Text="{Binding Convert_CsfFile_Content, Mode=OneWay}" IsUndoEnabled="False" SelectionChanged="ConvertCsfFileContentTextBox_SelectionChanged" ContextMenuOpening="ConvertCsfFileContentTextBox_ContextMenuOpening" />
                <TextBlock Margin="10" Grid.Row="2" TextWrapping="Wrap" Text="{Binding Convert_CsfFile_Tips, Mode=OneWay}" />
            </Grid>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.LabelOverrideTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Repair" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.LabelOverrideTextBlock1}" />
                <Button Content="{x:Static l10n:TextResources.LabelOverrideButton1}" Click="LabelOverride_LoadUpstreamFile_Click" />
                <Button Content="{x:Static l10n:TextResources.LabelOverrideButton2}" Click="LabelOverride_LoadCurrentFile_Click" />
                <Button Content="{x:Static l10n:TextResources.LabelOverrideButton3}" Click="LabelOverride_SaveCsfFile_Click" />
                <Button Content="{x:Static l10n:TextResources.LabelOverrideButton4}" Click="LabelOverride_SaveIniFile_Click" />
            </ui:SimpleStackPanel>
        </TabItem>

        <TabItem Header="{x:Static l10n:TextResources.LabelCheckTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Zoom" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.LabelCheckTextBlock1}" />
                <Button Content="{x:Static l10n:TextResources.LabelCheckButton1}" Click="LabelCheck_LoadCsfFile_Click" />
                <Button Content="{x:Static l10n:TextResources.LabelCheckButton2}" Click="LabelCheck_SelectMapFolder_Click" />
                <TextBox ui:ControlHelper.Header="{x:Static l10n:TextResources.LabelCheckTextboxHeader}" Text="{Binding MissingLabelPlaceholder, Mode=OneWay}" IsReadOnly="True" />
                <Button Content="{x:Static l10n:TextResources.LabelCheckButton3}" Click="LabelCheck_SaveIniFile_Click" />
            </ui:SimpleStackPanel>
        </TabItem>

        <TabItem Header="{x:Static l10n:TextResources.TranslationNewTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Comment" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.TranslationNewTextBlock1}" />
                <TextBox ui:ControlHelper.Header="{x:Static l10n:TextResources.TranslationNewTextboxHeader}" Text="{Binding TranslationNeededPlaceholder, Mode=OneWay}" IsReadOnly="True" />
                <Button Content="{x:Static l10n:TextResources.TranslationNewButton1}" Click="TranslationNew_LoadFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationNewButton2}" Click="TranslationNew_SaveIniFile_Click" />
            </ui:SimpleStackPanel>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.TranslationTileTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Comment" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.TranslationTileTextBlock1}" />
                <TextBox ui:ControlHelper.Header="{x:Static l10n:TextResources.TranslationNewTextboxHeader}" Text="{Binding TranslationNeededPlaceholder, Mode=OneWay}" IsReadOnly="True" />
                <Button Content="{x:Static l10n:TextResources.TranslationTileButton1}" Click="TranslationTile_LoadUpstreamFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationTileButton2}" Click="TranslationTile_LoadTranslatedFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationTileButton3}" Click="TranslationTile_SaveIniFile_Click" />
            </ui:SimpleStackPanel>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.TranslationOverrideTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Comment" />
            </ui:TabItemHelper.Icon>

            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.TranslationOverrideTextBlock1}" />

                <Button Content="{x:Static l10n:TextResources.TranslationOverrideButton1}" Click="TranslationOverride_LoadUpstreamFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationOverrideButton2}" Click="TranslationOverride_LoadTranslatedFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationOverrideButton3}" Click="TranslationOverride_SaveIniFile_Click" />
            </ui:SimpleStackPanel>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.TranslationUpdateTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Comment" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.TranslationUpdateTextBlock1}" />
                <TextBox ui:ControlHelper.Header="{x:Static l10n:TextResources.TranslationNewTextboxHeader}" Text="{Binding TranslationNeededPlaceholder, Mode=OneWay}" IsReadOnly="True" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateButton1}" Click="TranslationUpdate_LoadOldUpstreamFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateButton2}" Click="TranslationUpdate_LoadNewUpstreamFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateButton3}" Click="TranslationUpdate_LoadOldTranslatedFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateButton4}" Click="TranslationUpdate_SaveIniFile_Click" />
            </ui:SimpleStackPanel>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.TranslationUpdateCheckTabHeader}" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Comment" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.TranslationUpdateCheckTextBlock1}" />
                <TextBox ui:ControlHelper.Header="{x:Static l10n:TextResources.TranslationNewTextboxHeader}" Text="{Binding TranslationNeededPlaceholder, Mode=OneWay}" IsReadOnly="True" />
                <TextBox Text="{Binding TranslationDeleteNeededPlaceholder, Mode=OneWay}" IsReadOnly="True" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateCheckButton1}" Click="TranslationUpdateCheck_LoadOldUpstreamFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateCheckButton2}" Click="TranslationUpdateCheck_LoadNewUpstreamFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateCheckButton3}" Click="TranslationUpdateCheck_LoadOldTranslatedFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateCheckButton4}" Click="TranslationUpdateCheck_LoadNewTranslatedFile_Click" />
                <Button Content="{x:Static l10n:TextResources.TranslationUpdateCheckButton5}" Click="TranslationUpdateCheck_SaveIniFile_Click" />
            </ui:SimpleStackPanel>
        </TabItem>
        <TabItem Header="{x:Static l10n:TextResources.WatchModeTabHeader}" x:Name="UI_WatchModeTabItem" Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=AdvancedMode}">
            <ui:TabItemHelper.Icon>
                <ui:SymbolIcon Symbol="Manage" />
            </ui:TabItemHelper.Icon>
            <ui:SimpleStackPanel Spacing="12" Margin="10">
                <TextBlock TextWrapping="Wrap" Text="{x:Static l10n:TextResources.WatchModeTextBlock1}" />
                <TextBlock Text="{x:Static l10n:TextResources.WatchModeTextBlock2}" />
                <TextBox AcceptsReturn="True" IsReadOnly="False" Height="200" Text="{Binding WatchConfigStr, Mode=TwoWay}" >
                </TextBox>
                <Button Content="{x:Static l10n:TextResources.WatchModeButton1}" Click="WatchMode_Confirm_Click"/>
            </ui:SimpleStackPanel>
        </TabItem>
    </TabControl>
</Window>